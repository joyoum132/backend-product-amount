# 백엔드 과제 구현(유조영)

## 시나리오 이해
- 사용자에게 여러개의 쿠폰이 존재할 때, 특정 상품에 대해 <u>적용 가능한 쿠폰인지 확인</u>과 동시에 <u>할인된 가격을 보여주는 </u> API

## 구현 참고 사항
- JDK 17
- request 의 모든 쿠폰이 만료되었거나 사용할 수 없다면 exception
- request 의 쿠폰 중 하나라도 적용 가능하다면 가격 계산
- `금액 할인`과 `% 할인`이 섞여있다면 `% 할인`을 먼저 적용
- Exception 발생 시 상태 코드를 구분하고, 일괄적인 응답을 내려주기 위해 RestControllerAdvice 사용

## 기존 코드 변경 내용
- 도메인을 엔티티로 변경하면서 id를 int -> Long 타입으로 변환했고, ProductInfoRequest 의 자료형도 이에 맞게 변경함
- `H2Runner` 및 관련 코드 삭제
- 서버 구동 시 JPA 가 자동으로 DDL 생성하므로 schema-locations 주석

## 테스트 내용
- 상품 가격 범위 확인 
  - isValidRange 동작 확인
  - 천원 이상 천만원 미만의 상품만 프로모션 적용 가능
- 모든 프로모션 적용
  - 서비스 로직 테스트
  - 적용 후 금액 일치하는지 확인
- 일부 프로모션 적용
  - 서비스 로직 테스트
  - 적용 후 금액 일치하는지 확인
- 사용 가능한 프로모션이 없어서 실패
  - service 로직 테스트
  - request 의 쿠폰이 모두 사용 불가능할 때 Exception 발생하는지 확인
- 상품 가격 검증 실패
  - 서비스 로직 테스트
  - 상품 가격이 잘못되었을 때 Exception 발생하는지 확인
- 프로모션 적용 후 가격 비교
  - applyPromotion 동작 확인
- 사용 가능한 프로모션 조회
  - 쿼리가 의도대로 동작하는지 확인